#include <criterion/criterion.h>
#include <criterion/redirect.h>

#include "../sources/binaryConverter/binaryConverter.hpp"

Test(binaryConverter, string_to_binary_connexion)
{
    binaryConverter binaryConverter;
    std::string input = "100:";
    std::string expected_output = "00110001001100000011000000111010";
    std::string output = binaryConverter.string_to_binary(input);
    cr_assert(output == expected_output, "Expected %s but got %s", expected_output.c_str(), output.c_str());
}

Test(binaryConverter, binary_to_string_connexion)
{
    binaryConverter binaryConverter;
    std::string input = "00110001001100000011000000111010";
    std::string expected_output = "100:";
    std::string output = binaryConverter.binary_to_string(input);
    cr_assert(output == expected_output, "Expected %s but got %s", expected_output.c_str(), output.c_str());
}

Test(binaryConverter, string_to_binary_connexion2)
{
    binaryConverter binaryConverter;
    std::string input = "300:id=2;{sprite_name=”plane.jpeg”,pos=[x=”-92.92”,y=“686.16”]};{sprite_name=”mob.jpeg”,pos=[x=”23.19”,y=“68.22”]}";
    std::string expected_output = "001100110011000000110000001110100110100101100100001111010011001000111011011110110111001101110000011100100110100101110100011001010101111101101110011000010110110101100101001111011110001010000000100111010111000001101100011000010110111001100101001011100110101001110000011001010110011111100010100000001001110100101100011100000110111101110011001111010101101101111000001111011110001010000000100111010010110100111001001100100010111000111001001100101110001010000000100111010010110000100000011110010011110111100010100000001001110000110110001110000011011000101110001100010011011011100010100000001001110101011101011111010011101101111011011100110111000001110010011010010111010001100101010111110110111001100001011011010110010100111101111000101000000010011101011011010110111101100010001011100110101001110000011001010110011111100010100000001001110100101100001000000111000001101111011100110011110101011011011110000011110111100010100000001001110100110010001100110010111000110001001110011110001010000000100111010010110001111001001111011110001010000000100111000011011000111000001011100011001000110010111000101000000010011101010111010111110100001010";
    std::string output = binaryConverter.string_to_binary(input);
    cr_assert(output == expected_output, "Expected %s but got %s", expected_output.c_str(), output.c_str());
}